# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MockAPI

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∫–µ—à–±–µ–∫–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ä–∞–±–æ—Ç—É —Å MockAPI –≤–º–µ—Å—Ç–æ Supabase –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–æ–≤. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞ Supabase.

## üîÑ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É MockAPI –∏ Supabase

### –¢–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º: MockAPI
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –Ω–∞ —Ä–∞–±–æ—Ç—É —Å MockAPI:
- URL: `https://68bb5f3d84055bce63f1cbb7.mockapi.io/products`
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–≤–∞—Ä–∞: `{ id, name, price }`

### –ö–∞–∫ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Supabase:

1. **–í —Ñ–∞–π–ª–µ `src/supabase/supabase.service.ts`:**
   ```typescript
   // –ò–∑–º–µ–Ω–∏—Ç—å —Ñ–ª–∞–≥
   private readonly useMockAPI = false; // true –¥–ª—è MockAPI, false –¥–ª—è Supabase
   
   // –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é Supabase
   const supabaseUrl = process.env.SUPABASE_URL;
   const supabaseKey = process.env.SUPABASE_KEY;
   
   if (!supabaseUrl || !supabaseKey) {
     throw new Error('SUPABASE_URL and SUPABASE_KEY must be defined in environment variables');
   }
   
   this.supabase = createClient(supabaseUrl, supabaseKey);
   ```

2. **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ Supabase –≤ –º–µ—Ç–æ–¥–∞—Ö:**
   - `getAllProducts()`
   - `getProductById()`
   - `searchProducts()`
   - `getProductsByCategory()`
   - `getProductsInPriceRange()`
   - `testConnection()`

3. **–ó–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ MockAPI –≤ —Ç–µ—Ö –∂–µ –º–µ—Ç–æ–¥–∞—Ö**

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### MockAPI:
```json
{
  "id": "1",
  "name": "iPhone 15 Pro",
  "price": 999.99
}
```

### Supabase (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è):
```json
{
  "id": "uuid",
  "name": "iPhone 15 Pro", 
  "price": 999.99,
  "description": "Latest iPhone model",
  "image": "https://example.com/iphone15.jpg",
  "category": "Smartphones"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
curl -X GET http://localhost:8080/cashback/health
```

**–û—Ç–≤–µ—Ç –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å MockAPI:**
```json
{
  "statusCode": 200,
  "message": "MockAPI connection is healthy",
  "connected": true,
  "currentMode": "MockAPI",
  "timestamp": "2024-01-01T00:00:00.000Z"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–æ–≤:
```bash
curl -X GET http://localhost:8080/cashback/products \
  -H "X-User-Phone: +996701234567"
```

### –ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤:
```bash
curl -X GET "http://localhost:8080/cashback/products/search?query=iPhone" \
  -H "X-User-Phone: +996701234567"
```

## üîß API –º–µ—Ç–æ–¥—ã

### –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `getAllProducts()` - –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
- `getProductById(id)` - –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID
- `searchProducts(query)` - –ø–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã:
- `getProductsByCategory(category)` - —Ç–æ–≤–∞—Ä—ã –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç —Å MockAPI)
- `getProductsInPriceRange(min, max)` - —Ç–æ–≤–∞—Ä—ã –ø–æ —Ü–µ–Ω–æ–≤–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É
- `testConnection()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–º:
- `setUseMockAPI(boolean)` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–µ–∂–∏–º–∞
- `getCurrentMode()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞

## üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ MockAPI

1. **–ë–µ—Å–ø–ª–∞—Ç–Ω–æ** - –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –æ–ø–ª–∞—á–µ–Ω–Ω–æ–≥–æ –∞–∫–∫–∞—É–Ω—Ç–∞
2. **–ë—ã—Å—Ç—Ä–æ** - –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
3. **–ü—Ä–æ—Å—Ç–æ** - –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
4. **–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é** - –¥–∞–Ω–Ω—ã–µ —É–∂–µ –µ—Å—Ç—å

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è MockAPI

1. **–¢–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ** - –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å –¥–∞–Ω–Ω—ã–µ
2. **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - —Ç–æ–ª—å–∫–æ `id`, `name`, `price`
3. **–ù–µ—Ç —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ** - –ø–æ–∏—Å–∫ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–æ–∫–∞–ª—å–Ω–æ
4. **–ù–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–π** - –ø–æ–ª–µ `category` –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç

## üîÑ –í–æ–∑–≤—Ä–∞—Ç –∫ Supabase

–ö–æ–≥–¥–∞ –±—É–¥–µ—Ç–µ –≥–æ—Ç–æ–≤—ã –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ Supabase:

1. **–û–ø–ª–∞—Ç–∏—Ç–µ –∞–∫–∫–∞—É–Ω—Ç Supabase**
2. **–°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É products** —Å –Ω—É–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```env
   SUPABASE_URL="https://your-project.supabase.co"
   SUPABASE_KEY="your-supabase-anon-key"
   ```
4. **–ò–∑–º–µ–Ω–∏—Ç–µ —Ñ–ª–∞–≥ `useMockAPI = false`**
5. **–†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –∫–æ–¥ Supabase**

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä—É–µ—Ç:
- –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã (MockAPI/Supabase)
- –û—à–∏–±–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –î–µ—Ç–∞–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤
- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π

## üéØ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

MockAPI –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è:
- –†–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- MVP –≤–µ—Ä—Å–∏–π
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–π
- –ö–æ–≥–¥–∞ Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

Supabase –ª—É—á—à–µ –¥–ª—è:
- –ü—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- –°–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- –ë–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
